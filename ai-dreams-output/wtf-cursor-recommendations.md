# WTF Cursor Analysis - SQLStressTest

## Summary
This analysis identified **47 WTF issues** that should be addressed to improve code quality and developer experience.

### Dependency Injection Violations (47 issues)

These constructors contain direct instantiation (`new` statements) that should be replaced with dependency injection.

**Agent Instructions:**
1. Replace `new` statements in constructors with constructor parameters
2. Use dependency injection containers to manage object lifetimes
3. Create interfaces for dependencies to enable testing and flexibility
4. Apply Dependency Inversion Principle (DIP) - depend on abstractions, not concretions

- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Models/StorageResponse.cs:6** - Constructor 'StorageResponse.Ok' uses 'new StorageResponse()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject StorageResponse via constructor parameter instead of using 'new StorageResponse()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Hubs/SqlHub.cs:11** - Constructor 'SqlHub.OnConnectedAsync' uses 'new HeartbeatSender()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject HeartbeatSender via constructor parameter instead of using 'new HeartbeatSender()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Hubs/SqlHub.cs:10** - Constructor 'SqlHub.OnConnectedAsync' uses 'new ConnectionCacheService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ConnectionCacheService via constructor parameter instead of using 'new ConnectionCacheService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Hubs/SqlHub.cs:12** - Constructor 'SqlHub.OnConnectedAsync' uses 'new ConnectionLifecycleHandler()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ConnectionLifecycleHandler via constructor parameter instead of using 'new ConnectionLifecycleHandler()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Hubs/SqlHub.cs:11** - Constructor 'SqlHub.OnConnectedAsync' uses 'new StorageRequestHandler()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject StorageRequestHandler via constructor parameter instead of using 'new StorageRequestHandler()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Controllers/SqlController.cs:10** - Constructor 'SqlController.ReloadConnectionsAsync' uses 'new ConnectionCacheService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ConnectionCacheService via constructor parameter instead of using 'new ConnectionCacheService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Controllers/SqlController.cs:11** - Constructor 'SqlController.ReloadConnectionsAsync' uses 'new QueryRequestValidator()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject QueryRequestValidator via constructor parameter instead of using 'new QueryRequestValidator()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Controllers/SqlController.cs:12** - Constructor 'SqlController.ReloadConnectionsAsync' uses 'new QueryExecutionOrchestrator()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject QueryExecutionOrchestrator via constructor parameter instead of using 'new QueryExecutionOrchestrator()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Controllers/SqlController.cs:12** - Constructor 'SqlController.ReloadConnectionsAsync' uses 'new StressTestOrchestrator()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject StressTestOrchestrator via constructor parameter instead of using 'new StressTestOrchestrator()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/ExtendedEventConverter.cs:10** - Constructor 'ExtendedEventConverter.ConvertToExtendedEventData' uses 'new ExtendedEventData()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ExtendedEventData via constructor parameter instead of using 'new ExtendedEventData()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/ExtendedEventsReader.cs:10** - Constructor 'ExtendedEventsReader.StartSessionAsync' uses 'new ExtendedEventsSessionManager()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ExtendedEventsSessionManager via constructor parameter instead of using 'new ExtendedEventsSessionManager()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/ExtendedEventsReader.cs:13** - Constructor 'ExtendedEventsReader.StartSessionAsync' uses 'new ExtendedEventsProcessor()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ExtendedEventsProcessor via constructor parameter instead of using 'new ExtendedEventsProcessor()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/ExtendedEventsReader.cs:10** - Constructor 'ExtendedEventsReader.StartSessionAsync' uses 'new ExtendedEventsReaderService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ExtendedEventsReaderService via constructor parameter instead of using 'new ExtendedEventsReaderService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/ConnectionTester.cs:10** - Constructor 'ConnectionTester.TestConnectionAsync' uses 'new ServerVersionRetriever()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ServerVersionRetriever via constructor parameter instead of using 'new ServerVersionRetriever()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/ConnectionTester.cs:10** - Constructor 'ConnectionTester.TestConnectionAsync' uses 'new UserInfoRetriever()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject UserInfoRetriever via constructor parameter instead of using 'new UserInfoRetriever()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/ConnectionTester.cs:10** - Constructor 'ConnectionTester.TestConnectionAsync' uses 'new DatabaseListRetriever()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject DatabaseListRetriever via constructor parameter instead of using 'new DatabaseListRetriever()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/ExtendedEventsService.cs:12** - Constructor 'ExtendedEventsService.StartAsync' uses 'new ExtendedEventsReader()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ExtendedEventsReader via constructor parameter instead of using 'new ExtendedEventsReader()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/SqlConnectionWrapper.cs:27** - Constructor 'SqlConnectionWrapper.OpenAsync' uses 'new SqlCommandWrapper()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject SqlCommandWrapper via constructor parameter instead of using 'new SqlCommandWrapper()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/SqlConnectionWrapper.cs:49** - Constructor 'SqlConnectionWrapper.OpenAsync' uses 'new SqlDataReaderWrapper()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject SqlDataReaderWrapper via constructor parameter instead of using 'new SqlDataReaderWrapper()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/SqlConnectionService.cs:11** - Constructor 'SqlConnectionService.TestConnectionAsync' uses 'new ConnectionTester()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ConnectionTester via constructor parameter instead of using 'new ConnectionTester()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/SqlConnectionService.cs:11** - Constructor 'SqlConnectionService.TestConnectionAsync' uses 'new QueryRunner()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject QueryRunner via constructor parameter instead of using 'new QueryRunner()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/SqlConnectionService.cs:9** - Constructor 'SqlConnectionService.TestConnectionAsync' uses 'new QueryResultSerializer()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject QueryResultSerializer via constructor parameter instead of using 'new QueryResultSerializer()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/SqlConnectionService.cs:11** - Constructor 'SqlConnectionService.TestConnectionAsync' uses 'new QueryResultStorageHandler()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject QueryResultStorageHandler via constructor parameter instead of using 'new QueryResultStorageHandler()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service/Services/SqlConnectionFactory.cs:6** - Constructor 'SqlConnectionFactory.CreateConnection' uses 'new SqlConnectionWrapper()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject SqlConnectionWrapper via constructor parameter instead of using 'new SqlConnectionWrapper()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Models/ExtendedEventDataTests.cs:10** - Constructor 'ExtendedEventDataTests.Constructor_InitializesEmptyDictionaries' uses 'new ExtendedEventData()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ExtendedEventData via constructor parameter instead of using 'new ExtendedEventData()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Utilities/ConnectionStringBuilderTests.cs:6** - Constructor 'ConnectionStringBuilderTests.Build_IncludesServer' uses 'new ConnectionStringBuilder()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ConnectionStringBuilder via constructor parameter instead of using 'new ConnectionStringBuilder()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Hubs/SqlHubTests.cs:12** - Constructor 'SqlHubTests.OnConnectedAsync_ShouldWaitForHandlerRegistration_BeforeCallingLoadConnections' uses 'new VSCodeStorageService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject VSCodeStorageService via constructor parameter instead of using 'new VSCodeStorageService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Hubs/SqlHubTests.cs:8** - Constructor 'SqlHubTests.OnConnectedAsync_ShouldWaitForHandlerRegistration_BeforeCallingLoadConnections' uses 'new SqlHub()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject SqlHub via constructor parameter instead of using 'new SqlHub()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Controllers/SqlControllerTests.cs:8** - Constructor 'SqlControllerTests.Dispose' uses 'new SqlController()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject SqlController via constructor parameter instead of using 'new SqlController()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/PerformanceServiceTests.cs:9** - Constructor 'PerformanceServiceTests.StopStreaming_DoesNotThrow_WhenNotStarted' uses 'new PerformanceService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject PerformanceService via constructor parameter instead of using 'new PerformanceService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/VSCodeStorageServiceTests.cs:12** - Constructor 'VSCodeStorageServiceTests.SetConnectionId_SetsConnectionIdCorrectly' uses 'new VSCodeStorageService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject VSCodeStorageService via constructor parameter instead of using 'new VSCodeStorageService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:6** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new TestLoggerProvider()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject TestLoggerProvider via constructor parameter instead of using 'new TestLoggerProvider()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:7** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new DataSizeCalculator()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject DataSizeCalculator via constructor parameter instead of using 'new DataSizeCalculator()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:9** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new ContextInfoSetter()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ContextInfoSetter via constructor parameter instead of using 'new ContextInfoSetter()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:9** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new QueryDataSizeCalculator()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject QueryDataSizeCalculator via constructor parameter instead of using 'new QueryDataSizeCalculator()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:9** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new QueryExecutor()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject QueryExecutor via constructor parameter instead of using 'new QueryExecutor()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:12** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new SignalRMessageSender()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject SignalRMessageSender via constructor parameter instead of using 'new SignalRMessageSender()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:10** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new ExtendedEventConverter()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ExtendedEventConverter via constructor parameter instead of using 'new ExtendedEventConverter()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:10** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new EventLookupService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject EventLookupService via constructor parameter instead of using 'new EventLookupService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:11** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new EventStreamingService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject EventStreamingService via constructor parameter instead of using 'new EventStreamingService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:11** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new ExtendedEventProcessor()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject ExtendedEventProcessor via constructor parameter instead of using 'new ExtendedEventProcessor()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/StressTestServiceTests.cs:13** - Constructor 'StressTestServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new StressTestService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject StressTestService via constructor parameter instead of using 'new StressTestService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.UnitTests/Services/SqlConnectionServiceTests.cs:11** - Constructor 'SqlConnectionServiceTests.Constructor_ThrowsArgumentNullException_WhenConnectionStringBuilderIsNull' uses 'new SqlConnectionService()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject SqlConnectionService via constructor parameter instead of using 'new SqlConnectionService()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.IntegrationTests/Fixtures/WebApplicationFixture.cs:11** - Constructor 'WebApplicationFixture.ConfigureWebHost' uses 'new TestServerCompatibleJsonOutputFormatter()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject TestServerCompatibleJsonOutputFormatter via constructor parameter instead of using 'new TestServerCompatibleJsonOutputFormatter()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.IntegrationTests/Fixtures/MockSqlConnectionFactory.cs:13** - Constructor 'MockSqlConnectionFactory.CreateConnection' uses 'new MockSqlConnectionWrapper()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject MockSqlConnectionWrapper via constructor parameter instead of using 'new MockSqlConnectionWrapper()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.IntegrationTests/Fixtures/MockSqlConnectionFactory.cs:57** - Constructor 'MockSqlConnectionFactory.CreateConnection' uses 'new MockSqlCommandWrapper()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject MockSqlCommandWrapper via constructor parameter instead of using 'new MockSqlCommandWrapper()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.
- **/Users/dave/repos/SQLStressTest/backend/SQLStressTest.Service.IntegrationTests/Fixtures/MockSqlConnectionFactory.cs:86** - Constructor 'MockSqlConnectionFactory.CreateConnection' uses 'new MockSqlDataReaderWrapper()' but we have source code for this type. Use dependency injection instead.
  - **Fix**: Inject MockSqlDataReaderWrapper via constructor parameter instead of using 'new MockSqlDataReaderWrapper()'. Apply SOLID principles: use Dependency Inversion - depend on interfaces, not concrete classes. Extract to separate testable files. Create unit tests that inject mock dependencies to verify behavior.



## What is WTF Cursor Analysis?

WTF Cursor analysis identifies problematic code patterns that make developers say "What The F***" when encountering them. These patterns include:

- **Fail Harder Violations**: Code that silently fails or has poor error handling
- **Dynamic Type Usage**: Excessive use of `dynamic` types that reduce type safety
- **Fallback Code Patterns**: Mock objects, test data, and placeholder code in production
- **Monolithic WebView Methods**: Large `getWebviewContent` methods that mix HTML/CSS/JavaScript and are not maintainable or testable
- **Dependency Injection Violations**: Direct instantiation (`new` statements) in constructors that should use dependency injection
- **Redundant Code**: Duplicate or similar code that should be consolidated
- **Complex Logic**: Overly complex code that's hard to understand and maintain

## Benefits of Fixing WTF Issues

- **Improved Code Quality**: Cleaner, more maintainable code
- **Better Error Handling**: Proper exception handling and error reporting
- **Type Safety**: Reduced use of dynamic types for better compile-time checking
- **Code Reusability**: Eliminated redundant code through proper abstraction
- **Developer Experience**: Code that's easier to understand and work with

## Action Items

### High Priority
- [ ] Fix all Fail Harder violations for proper error handling
  - **Agent Instructions**: Extract error handling to separate testable service classes. Apply SOLID principles. Create unit tests.
- [ ] Break down monolithic WebView content methods into separate, testable files
  - **Agent Instructions**: Break the script into separate testable files. Think SOLID - each file one responsibility. Create tests for each component.
- [ ] Replace dynamic types with proper type definitions where possible
  - **Agent Instructions**: Create interfaces/abstract classes (Dependency Inversion). Extract to separate testable files. Write unit tests.
- [ ] Remove fallback code (mocks, test data, TODOs) from production
  - **Agent Instructions**: Use dependency injection with interfaces. Extract to separate testable files. Create proper unit tests.

### Medium Priority
- [ ] Simplify complex logic and improve readability
  - **Agent Instructions**: Break into separate testable files following SOLID principles. Each file should have one responsibility.
- [ ] Add proper documentation for complex algorithms
- [ ] Implement proper logging and monitoring
  - **Agent Instructions**: Extract logging to separate testable service. Use dependency injection. Create unit tests.

### Low Priority
- [ ] Review and optimize performance bottlenecks
- [ ] Add comprehensive unit tests for complex logic
  - **Agent Instructions**: Break code into testable files first, then create tests. Think SOLID - test each responsibility separately.
- [ ] Consider refactoring large methods into smaller, focused methods
  - **Agent Instructions**: Extract to separate testable files. Apply Single Responsibility Principle. Create unit tests for each extracted method.

Generated on: 2025-11-13 14:00:48
